<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Para mi Princesa ‚ù§Ô∏è</title>

<style>
body{
    margin:0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #ff4e8a, #ff8fab);
    color:white;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    text-align:center;
    overflow:hidden;
}

.screen{
    max-width:600px;
    width:90%;
}

/* BOTONES */
button{
    padding:14px 30px;
    margin-top:25px;
    border:none;
    border-radius:30px;
    font-size:18px;
    cursor:pointer;
    transition:0.3s;
}

button:hover{
    transform:scale(1.1);
}

.hidden{
    display:none;
}

/* ===== CARTA GRANDE ===== */
.envelope{
    width:600px;
    max-width:95%;
    height:420px;
    background:#fff;
    position:relative;
    cursor:pointer;
    border-radius:20px;
    box-shadow:0 25px 60px rgba(0,0,0,0.3);
    margin:auto;
    perspective:1000px;
}

.flap{
    position:absolute;
    width:100%;
    height:100%;
    background:#ff4e8a;
    clip-path: polygon(0 0, 100% 0, 50% 60%);
    transition: transform 1s ease;
    transform-origin: top;
    border-radius:20px;
}

.open .flap{
    transform: rotateX(180deg);
}

.letter{
    position:absolute;
    width:90%;
    height:90%;
    background:white;
    color:#333;
    top:5%;
    left:5%;
    border-radius:20px;
    padding:35px;
    box-sizing:border-box;
    opacity:0;
    transition: opacity 1s ease 0.5s;
    overflow:auto;
    font-size:18px;
    line-height:1.6;
}

.open .letter{
    opacity:1;
}

.letter h3{
    font-size:28px;
    margin-bottom:20px;
}

/* ===== PREGUNTA ===== */
#question{
    position:absolute;
}

.yes{
    background:white;
    color:#ff4e8a;
}

.no{
    background:#ff2e63;
    color:white;
    position:absolute;
}

/* CANVAS */
canvas{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    pointer-events:none;
}
</style>
</head>
<body>

<!-- PANTALLA INICIAL -->
<div id="musicScreen" class="screen">
    <h2>Antes de continuar... üéµ</h2>
    <p>Presiona play y deja que la canci√≥n empiece üíñ</p>

    <!-- APPLE MUSIC EMBED -->
    <iframe 
    allow="autoplay *; encrypted-media *; fullscreen *; clipboard-write" 
    frameborder="0" 
    height="300" 
    style="width:100%;max-width:660px;overflow:hidden;border-radius:12px;" 
    sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" 
    src="https://embed.music.apple.com/es/album/20-21-ep/1526592995">
    </iframe>

    <button onclick="showLetter()">Ya empez√≥ la canci√≥n üíï</button>
</div>

<!-- CARTA -->
<div id="letterScreen" class="hidden">
    <div class="envelope" id="envelope" onclick="openLetter()">
        <div class="flap"></div>
        <div class="letter">
            <h3>Para ti, Ivonne ‚ù§Ô∏è</h3>
            <p>
            Espero te guste este regalo mi amor, a veces puedo llegar a ser el peor novio,
            pero siempre intento ser el mejor hombre para ti.
            Desde que empezamos a conocernos quise entregarme completamente a ti.
            Cada momento que paso contigo se vuelve inolvidable( si ya se que no me crees porque luego se me olvidan las cosas).
            Estoy muy enamorado de ti Ivonne y quiero compartir este y todos los 14 de febrero a tu lado.
            <br><br>
            Ahora si viene la pregunta suuuuuper  mega importante.
            Este 14 de febrero...
            </p>
            <button onclick="showQuestion()">Continuar üíå</button>
        </div>
    </div>
</div>

<!-- PREGUNTA -->
<div id="question" class="hidden">
    <h1>¬øQuieres ser mi San Valent√≠n? üíñ</h1>
    <button class="yes" onclick="sayYes()">S√≠ üíï</button>
    <button class="no" id="noBtn">No üò¢</button>
</div>

<canvas id="hearts"></canvas>

<script>

/* CAMBIAR PANTALLAS */
function showLetter(){
    document.getElementById("musicScreen").classList.add("hidden");
    document.getElementById("letterScreen").classList.remove("hidden");
}

function openLetter(){
    document.getElementById("envelope").classList.add("open");
}

function showQuestion(){
    document.getElementById("letterScreen").classList.add("hidden");
    document.getElementById("question").classList.remove("hidden");
}

function sayYes(){
    document.getElementById("question").innerHTML =
    "<h1>Sab√≠a que dir√≠as que s√≠ üíñ‚ú®</h1>";
    startHearts();
}

/* BOT√ìN QUE HUYE */
const noBtn = document.getElementById("noBtn");

noBtn.addEventListener("mouseover", () => {
    const x = Math.random() * (window.innerWidth - 120);
    const y = Math.random() * (window.innerHeight - 60);
    noBtn.style.left = x + "px";
    noBtn.style.top = y + "px";
});

/* ===== CORAZONES ===== */
const canvas = document.getElementById("hearts");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let hearts = [];

function randomColor(){
    const colors = ["#ff4e8a", "#ff2e63", "#ffffff", "#ff99c8"];
    return colors[Math.floor(Math.random() * colors.length)];
}

function startHearts(){
    setInterval(()=>{
        hearts.push({
            x: Math.random()*canvas.width,
            y: -20,
            size: Math.random()*20+15,
            speed: Math.random()*2+1,
            sway: Math.random()*2,
            angle: Math.random()*360,
            rotationSpeed: (Math.random()-0.5)*0.1,
            color: randomColor()
        });
    },200);

    animate();
}

function drawHeart(x, y, size, angle, color) {
    ctx.save();
    ctx.translate(x, y);
    ctx.rotate(angle);
    ctx.scale(size/20, size/20);

    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.bezierCurveTo(-10, -10, -20, 10, 0, 20);
    ctx.bezierCurveTo(20, 10, 10, -10, 0, 0);
    ctx.fillStyle = color;
    ctx.shadowColor = color;
    ctx.shadowBlur = 20;
    ctx.fill();

    ctx.restore();
}

function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    hearts.forEach((heart,index)=>{
        heart.y += heart.speed;
        heart.x += Math.sin(heart.y * 0.01) * heart.sway;
        heart.angle += heart.rotationSpeed;

        drawHeart(heart.x, heart.y, heart.size, heart.angle, heart.color);

        if(heart.y > canvas.height + 50){
            hearts.splice(index,1);
        }
    });

    requestAnimationFrame(animate);
}

</script>

</body>
</html>
